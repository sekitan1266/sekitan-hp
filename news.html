<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>sekitan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

<div id="news-list"></div>
<div id="pagination"></div>

<script>
const ITEMS_PER_PAGE = 5;
let currentPage = 1;
let articles = [];

function renderPage(page) {
  const container = document.getElementById('news-list');
  container.innerHTML = '';
  const start = (page-1)*ITEMS_PER_PAGE;
  const end = start + ITEMS_PER_PAGE;
  articles.slice(start, end).forEach(item => {
    const div = document.createElement('div');
    div.innerHTML = `<strong>${item.date}</strong> ${item.title}<br>${item.summary}`;
    container.appendChild(div);
  });

  // ページネーション表示
  const totalPages = Math.ceil(articles.length / ITEMS_PER_PAGE);
  const pagination = document.getElementById('pagination');
  pagination.innerHTML = '';
  for(let i=1;i<=totalPages;i++){
    const btn = document.createElement('button');
    btn.textContent = i;
    btn.disabled = (i===page);
    btn.onclick = ()=>{ currentPage=i; renderPage(i); };
    pagination.appendChild(btn);
  }
}

fetch('data/news.json')
  .then(res => res.json())
  .then(data => {
    // 公開記事だけ抽出し、日付順にソート
    articles = data.filter(d => d.published)
                   .sort((a,b) => new Date(b.date) - new Date(a.date));
    renderPage(currentPage);
  });
</script>

</body>
</html>